<!DOCTYPE html>
<html>
<head>
<title>Cart - Flame On</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
font-family:Arial;
background:#111;
color:white;
margin:0;
padding:15px;
}
h1{
text-align:center;
color:#ff4500;
}
.item{
background:#1c1c1c;
padding:15px;
margin:10px 0;
border-radius:10px;
}
button{
background:#ff4500;
border:none;
padding:6px 12px;
color:white;
border-radius:6px;
margin-top:8px;
}
.total{
text-align:center;
font-size:20px;
margin-top:20px;
}
</style>
</head>
<body>

<h1>ðŸ›’ Your Cart</h1>

<div id="cartItems"></div>
<div style="text-align:center;margin-top:20px;">
<input type="text" id="customerName" placeholder="Enter Your Name" 
style="padding:8px;width:80%;margin-bottom:10px;border-radius:6px;border:none;">
<br>
<input type="tel" id="customerPhone" placeholder="Enter Your Phone Number" 
style="padding:8px;width:80%;margin-bottom:10px;border-radius:6px;border:none;">
</div>
    
<div class="total">
Total: â‚¹<span id="total">0</span>
<br><br>
<button onclick="checkout()">Order on WhatsApp</button>
    <br><br>
<button onclick="clearCart()">Clear Cart</button>
    
<br><br>
<a href="index.html">
<button>Back to Menu</button>
</a>
</div>

<script>

let cart = JSON.parse(localStorage.getItem("cartData")) || {};
let totalAmount = 0;

const cartDiv = document.getElementById("cartItems");
   
    if(Object.keys(cart).length === 0){
    cartDiv.innerHTML = "<p style='text-align:center;margin-top:20px;'>Your cart is empty ðŸ˜”</p>";
    }

// Show Items
for(let item in cart){

    if(cart[item].qty > 0){

        let subtotal = cart[item].qty * cart[item].price;
        totalAmount += subtotal;

        const div = document.createElement("div");
        div.className="item";

        div.innerHTML = `
            <b>${item}</b><br>
            Qty: ${cart[item].qty}<br>
            Price: â‚¹${cart[item].price}<br>
            Subtotal: â‚¹${subtotal}
            <br>
            <button onclick="removeItem('${item}')">Remove</button>
        `;

        cartDiv.appendChild(div);
    }
}

document.getElementById("total").innerText = totalAmount;

function removeItem(name){
    delete cart[name];
    localStorage.setItem("cartData", JSON.stringify(cart));
    location.reload();
}
    
function clearCart(){
    localStorage.removeItem("cartData");
    location.reload();
}
    
function checkout(){

    if(Object.keys(cart).length === 0){
        alert("Cart is empty!");
        return;
    }

    let name = document.getElementById("customerName").value;
    let phoneInput = document.getElementById("customerPhone").value;

    if(!name || !phoneInput){
        alert("Please enter your name and phone number");
        return;
    }

    let message = "ðŸ”¥ Flame On Order ðŸ”¥\n\n";
    message += "Customer Name: " + name + "\n";
    message += "Customer Phone: " + phoneInput + "\n\n";

    for(let item in cart){
        if(cart[item].qty > 0){
            message += item + " x " + cart[item].qty + "\n";
        }
    }

    message += "\nTotal: â‚¹" + totalAmount;

    let phone = "919090820969";

    let url = "https://wa.me/" + phone + "?text=" + encodeURIComponent(message);

    window.open(url, "_blank");
}
    
</script>

</body>
</html>
