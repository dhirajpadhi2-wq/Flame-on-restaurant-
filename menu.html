<!DOCTYPE html>
<html>
<head>
<title>Flame On Menu</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
font-family:Arial;
background:#111;
color:white;
margin:0;
}
h1{
text-align:center;
padding:15px;
background:#000;
color:#ff4500;
}
.item{
background:#1c1c1c;
margin:10px;
padding:15px;
border-radius:12px;
transition: transform 0.3s ease, box-shadow 0.3s ease;
animation: fadeIn 0.5s ease;
}

.item:hover{
transform: scale(1.04);
box-shadow: 0 8px 20px rgba(255,69,0,0.4);
}
button{
background:#ff4500;
border:none;
padding:6px 12px;
color:white;
border-radius:6px;
margin:3px;
transition: all 0.3s ease;
}

button:hover{
transform: scale(1.1);
box-shadow: 0 5px 15px rgba(255,69,0,0.5);
}
.quantity{
display:flex;
align-items:center;
gap:8px;
margin-top:8px;
}
.cart{
position:fixed;
bottom:0;
width:100%;
background:#000;
padding:15px;
text-align:center;
border-top:2px solid #ff4500;
}
input{
padding:8px;
border-radius:6px;
border:none;
width:80%;
margin-bottom:8px;
}
 @keyframes fadeIn{
from{
opacity:0;
transform: translateY(10px);
}
to{
opacity:1;
transform: translateY(0);
}
    }
</style>
</head>
<body>

<h1>ðŸ”¥ Flame On Menu ðŸ”¥</h1>

<div id="menu"></div>

<div class="cart">
<input type="text" id="customerName" placeholder="Enter Your Name">
<br>

<input type="tel" id="customerPhone" placeholder="Enter Your Phone Number">
<br>
    
Total: â‚¹<span id="total">0</span>
<br><br>
<button onclick="sendOrder()">Order on WhatsApp</button>
    
    <br><br>
    
<a href="track.html">
<button>Track My Orders</button>
</a>
    
</div>

<script>

let cart = {};
let totalAmount = 0;

fetch("./menu.json")
.then(res => res.json())
.then(data => {

    const menuDiv = document.getElementById("menu");

    data.forEach((category, catIndex) => {

        const catTitle = document.createElement("h2");
        catTitle.textContent = category.category;
        catTitle.style.color="#ff4500";
        menuDiv.appendChild(catTitle);

        category.items.forEach((item, itemIndex) => {

            let safeId = "item_" + catIndex + "_" + itemIndex;

            const div = document.createElement("div");
            div.className="item";

            div.innerHTML = `
                <b>${item.name}</b><br>
                â‚¹${item.price}
                <div class="quantity">
                    <button onclick="changeQty('${safeId}', '${item.name}', ${item.price}, -1)">-</button>
                    <span id="${safeId}">0</span>
                    <button onclick="changeQty('${safeId}', '${item.name}', ${item.price}, 1)">+</button>
                </div>
            `;

            menuDiv.appendChild(div);

        });

    });

})
.catch(error => {
    alert("Error loading menu.json");
    console.log(error);
});

function changeQty(id, name, price, change){

    if(!cart[name]){
        cart[name] = {qty:0, price:price};
    }

    cart[name].qty += change;

    if(cart[name].qty < 0){
        cart[name].qty = 0;
    }

    document.getElementById(id).innerText = cart[name].qty;

    calculateTotal();
}

function calculateTotal(){
    totalAmount = 0;

    for(let item in cart){
        totalAmount += cart[item].qty * cart[item].price;
    }

    document.getElementById("total").innerText = totalAmount;
}

function sendOrder(){

    if(totalAmount === 0){
        alert("Please select items first!");
        return;
    }

    let name = document.getElementById("customerName").value.trim();
    let phone = document.getElementById("customerPhone").value.trim();

    if(name === ""){
        alert("Please enter your name!");
        return;
    }

    if(phone === ""){
        alert("Please enter your phone number!");
        return;
    }

    let orderId = "FO" + Date.now();

    let orderItems = [];

    for(let item in cart){
        if(cart[item].qty > 0){
            orderItems.push({
                name: item,
                qty: cart[item].qty,
                price: cart[item].price
            });
        }
    }

    let orderData = {
        id: orderId,
        customer: name,
        phone: phone,
        items: orderItems,
        total: totalAmount,
        status: "Pending",
        date: new Date().toLocaleString()
    };

    let orders = JSON.parse(localStorage.getItem("flameOrders")) || [];
    orders.push(orderData);
    localStorage.setItem("flameOrders", JSON.stringify(orders));

    let message = "ðŸ”¥ Flame On Order ðŸ”¥\n\n";
    message += "Order ID: " + orderId + "\n";
    message += "Customer: " + name + "\n";
    message += "Phone: " + phone + "\n\n";

    orderItems.forEach(item => {
        message += item.name + " x " + item.qty +
                   " = â‚¹" + (item.qty * item.price) + "\n";
    });

    message += "\nTotal: â‚¹" + totalAmount;
    message += "\n\nThank you for ordering!";

    window.open("https://wa.me/919090820969?text=" + encodeURIComponent(message));

    alert("Order Placed! Your Order ID: " + orderId);
}

</script>

</body>
</html>
